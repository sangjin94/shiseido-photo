{% extends "base.html" %}
{% block content %}

<div class="container py-3" style="max-width: 1200px;">
  <div class="d-flex flex-wrap justify-content-between align-items-end gap-2 mb-3">
    <div>
      <div class="text-muted small">등록용</div>
      <h4 class="mb-1">상품 목록</h4>
      <div class="text-muted">상품을 선택하여 사진을 등록하거나 관리합니다.</div>
    </div>

    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="{{ url_for('logout') }}">로그아웃</a>
    </div>
  </div>

  <form method="get" class="mb-3">
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        name="q"
        value="{{ q }}"
        placeholder="상품명 / 상품코드 / 스캔바코드 검색"
      >
      <button class="btn btn-primary" type="submit">검색</button>
      <a class="btn btn-outline-secondary" href="{{ url_for('register_home') }}">초기화</a>
    </div>
  </form>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead>
          <tr>
            <th style="min-width:140px;">상품코드</th>
            <th>상품명</th>
            <th style="min-width:160px;">스캔바코드</th>
            <th class="text-end" style="min-width:90px;">사진수</th>
          </tr>
        </thead>
        <tbody>
          {% for p in products %}
          <tr style="cursor:pointer"
              onclick="location.href='{{ url_for('register_product_detail', item_code=p['item_code']) }}'">
            <td class="fw-semibold">{{ p['item_code'] }}</td>
            <td>{{ p['item_name'] or '-' }}</td>
            <td>{{ p['scan_code'] or '-' }}</td>
            <td class="text-end">{{ p['photo_count'] }}</td>
          </tr>
          {% endfor %}
          {% if not products %}
          <tr>
            <td colspan="4" class="text-center text-muted py-4">
              검색 결과가 없습니다.
            </td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}
