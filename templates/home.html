@'
{% extends "base.html" %}
{% block content %}

<div class="card p-3 shadow-sm mb-3">
  <div class="fw-bold fs-4">상품 검색</div>
  <div class="text-muted">
    상품코드 / 바코드 / 상품명 검색 가능
    <span class="ms-2">| 사진 등록된 상품: <b>{{ registered_count }}</b>개</span>
    <span class="ms-2">| 저장소: {% if use_s3 %}<b>S3</b>{% else %}<b>로컬</b>{% endif %}</span>
  </div>

  <form method="get" action="{{ url_for('home') }}" class="mt-3">
    <input class="form-control form-control-lg" name="q" value="{{ q }}" placeholder="예) S-0001 또는 880... 또는 상품명">
    <button class="btn btn-dark btn-lg w-100 mt-2">검색</button>
  </form>

  <div class="mt-3">
    <div class="text-muted small">상품코드/바코드로 바로 이동</div>
    <div class="d-flex gap-2">
      <input id="codeLookup" class="form-control form-control-lg" placeholder="코드 입력">
      <button class="btn btn-primary btn-lg" onclick="goLookup()">조회</button>
    </div>
  </div>
</div>

<div class="card p-3 shadow-sm">
  <div class="d-flex justify-content-between align-items-center">
    <div class="fw-semibold">최근 상품</div>
    <div class="text-muted small">최대 50개</div>
  </div>
  <hr/>

  {% if products %}
    <div class="list-group list-group-flush">
      {% for p in products %}
        <a class="list-group-item list-group-item-action py-3" href="{{ url_for('product_detail', product_id=p['id']) }}">
          <div class="fw-semibold">{{ p["name"] }}</div>
          <div class="text-muted small">
            {% if p["product_code"] %}상품코드: {{ p["product_code"] }} · {% endif %}
            바코드: {{ p["barcode"] }}
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-muted">검색 결과가 없습니다.</div>
  {% endif %}
</div>

<script>
  function goLookup(){
    const v = (document.getElementById("codeLookup").value || "").trim();
    if(!v) return;
    window.location.href = "/products/lookup?code=" + encodeURIComponent(v);
  }
</script>

{% endblock %}
'@ | Out-File -Encoding utf8 .\templates\home.html
